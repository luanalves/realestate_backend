{
  "info": {
    "_postman_id": "quicksol-api-v1.3",
    "name": "Quicksol Real Estate API",
    "description": "Complete API collection for QuickSol Real Estate Management System.\n\n## Features\n- Multi-tenancy with company isolation\n- RBAC: 9 security profiles\n- Properties, Agents, Leads management\n- Commission tracking and performance\n\n## Authentication Flow\n1. **Get OAuth Token**: POST /api/v1/auth/token\n2. **User Login**: POST /api/v1/users/login (returns session_id)\n3. **Use Both**: Authorization header + X-Openerp-Session-Id header\n\n## Headers\n- `Authorization: Bearer {{access_token}}`\n- `X-Openerp-Session-Id: {{session_id}}` (REQUIRED for GET)\n- `User-Agent: {{user_agent}}`\n- `Content-Type: application/json`\n\n## Changelog v1.3\n- Complete API coverage (50+ endpoints)\n- Properties, Agents, Assignments, Commissions\n- Performance and Rankings\n- Lead Management with activities and filters\n- Master Data endpoints\n- ADR-016 compliant",
    "version": "1.3.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Authentication",
      "description": "OAuth 2.0 authentication. Run these first.",
      "item": [
        {
          "name": "Get OAuth Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.access_token) {",
                  "    pm.environment.set('access_token', jsonData.access_token);",
                  "    console.log('✅ Access token saved');",
                  "    if (jsonData.refresh_token) {",
                  "        pm.environment.set('refresh_token', jsonData.refresh_token);",
                  "        console.log('✅ Refresh token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"client_id\": \"{{client_id}}\",\n  \"client_secret\": \"{{client_secret}}\",\n  \"grant_type\": \"client_credentials\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/token",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "token"]
            },
            "description": "Get OAuth 2.0 access token.\n\n**Response**: access_token, refresh_token, expires_in"
          }
        },
        {
          "name": "Refresh OAuth Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.access_token) {",
                  "    pm.environment.set('access_token', jsonData.access_token);",
                  "    if (jsonData.refresh_token) pm.environment.set('refresh_token', jsonData.refresh_token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"client_id\": \"{{client_id}}\",\n  \"client_secret\": \"{{client_secret}}\",\n  \"grant_type\": \"refresh_token\",\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "refresh"]
            }
          }
        },
        {
          "name": "Revoke Token",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{access_token}}\",\n  \"token_type_hint\": \"access_token\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/revoke",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "revoke"]
            }
          }
        }
      ]
    },
    {
      "name": "2. Users",
      "description": "User authentication and profile management.",
      "item": [
        {
          "name": "User Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.session_id) {",
                  "    pm.environment.set('session_id', jsonData.session_id);",
                  "    console.log('✅ Session ID saved');",
                  "} else if (jsonData && jsonData.result && jsonData.result.session_id) {",
                  "    pm.environment.set('session_id', jsonData.result.session_id);",
                  "    console.log('✅ Session ID saved (from result)');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/users/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "login"]
            },
            "description": "**Authentication:** Bearer Token required\n**Fingerprint validation:** Active\n\nLogin and get session_id."
          }
        },
        {
          "name": "User Logout",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {"mode": "raw", "raw": "{}"},
            "url": {
              "raw": "{{base_url}}/api/v1/users/logout",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "logout"]
            }
          }
        },
        {
          "name": "Get Current User (/me)",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {"mode": "raw", "raw": "{}"},
            "url": {
              "raw": "{{base_url}}/api/v1/me",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "me"]
            },
            "description": "Get information about the authenticated user."
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PATCH",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"phone\": \"+55 11 99999-0000\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/users/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "profile"]
            }
          }
        },
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"old_password\": \"current_password\",\n  \"new_password\": \"new_secure_password\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/users/change-password",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "change-password"]
            }
          }
        }
      ]
    },
    {
      "name": "3. Properties",
      "description": "Property CRUD operations.",
      "item": [
        {
          "name": "List Properties",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/properties?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "properties"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "offset", "value": "0"},
                {"key": "state", "value": "available", "disabled": true},
                {"key": "property_type_id", "value": "", "disabled": true},
                {"key": "min_price", "value": "", "disabled": true},
                {"key": "max_price", "value": "", "disabled": true},
                {"key": "bedrooms", "value": "", "disabled": true},
                {"key": "search", "value": "", "disabled": true}
              ]
            },
            "description": "**Authentication:** Bearer Token + Session ID required\n**Multi-tenancy:** Active\n\n**IMPORTANT:** GET requests use X-Openerp-Session-Id header."
          }
        },
        {
          "name": "Create Property",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.id) {",
                  "    pm.environment.set('property_id', jsonData.id);",
                  "    console.log('✅ Property ID saved: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Apartamento Centro - 3 quartos\",\n  \"property_type_id\": 1,\n  \"address\": \"Rua das Flores, 123\",\n  \"city\": \"São Paulo\",\n  \"price\": 450000.00,\n  \"bedrooms\": 3,\n  \"bathrooms\": 2,\n  \"area\": 120.5,\n  \"description\": \"Apartamento reformado em excelente localização\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/properties",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "properties"]
            }
          }
        },
        {
          "name": "Get Property Details",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/properties/{{property_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "properties", "{{property_id}}"]
            }
          }
        },
        {
          "name": "Update Property",
          "request": {
            "method": "PUT",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 480000.00,\n  \"state\": \"available\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/properties/{{property_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "properties", "{{property_id}}"]
            }
          }
        },
        {
          "name": "Delete Property",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/properties/{{property_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "properties", "{{property_id}}"]
            },
            "description": "Soft delete (archive) a property."
          }
        }
      ]
    },
    {
      "name": "4. Agents",
      "description": "Agent management operations.",
      "item": [
        {
          "name": "List Agents",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/agents?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "offset", "value": "0"},
                {"key": "active", "value": "true", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Create Agent",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.id) {",
                  "    pm.environment.set('agent_id', jsonData.id);",
                  "    console.log('✅ Agent ID saved: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"João Silva\",\n  \"email\": \"joao.silva@example.com\",\n  \"phone\": \"+55 11 98765-4321\",\n  \"creci\": \"F123456\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/agents",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents"]
            }
          }
        },
        {
          "name": "Get Agent Details",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}"]
            }
          }
        },
        {
          "name": "Update Agent",
          "request": {
            "method": "PUT",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+55 11 99999-0000\",\n  \"creci\": \"F654321\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}"]
            }
          }
        },
        {
          "name": "Deactivate Agent",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {"mode": "raw", "raw": "{}"},
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}/deactivate",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}", "deactivate"]
            }
          }
        },
        {
          "name": "Reactivate Agent",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {"mode": "raw", "raw": "{}"},
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}/reactivate",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}", "reactivate"]
            }
          }
        },
        {
          "name": "Get Agent's Properties",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}/properties?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}", "properties"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "offset", "value": "0"}
              ]
            }
          }
        }
      ]
    },
    {
      "name": "5. Assignments",
      "description": "Property-to-agent assignments.",
      "item": [
        {
          "name": "List Assignments",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/assignments?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "assignments"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "offset", "value": "0"},
                {"key": "agent_id", "value": "", "disabled": true},
                {"key": "property_id", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Create Assignment",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.id) {",
                  "    pm.environment.set('assignment_id', jsonData.id);",
                  "    console.log('✅ Assignment ID saved: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"agent_id\": {{agent_id}},\n  \"property_id\": {{property_id}}\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/assignments",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "assignments"]
            }
          }
        },
        {
          "name": "Delete Assignment",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/assignments/{{assignment_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "assignments", "{{assignment_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "6. Commissions",
      "description": "Commission rules and transactions.",
      "item": [
        {
          "name": "Get Commission Rules",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}/commission-rules",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}", "commission-rules"]
            }
          }
        },
        {
          "name": "Create Commission Rule",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.id) {",
                  "    pm.environment.set('rule_id', jsonData.id);",
                  "    console.log('✅ Rule ID saved: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"percentage\": 5.0,\n  \"min_sale_value\": 100000,\n  \"max_sale_value\": 500000\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}/commission-rules",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}", "commission-rules"]
            }
          }
        },
        {
          "name": "Update Commission Rule",
          "request": {
            "method": "PUT",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"percentage\": 6.0,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/commission-rules/{{rule_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "commission-rules", "{{rule_id}}"]
            }
          }
        },
        {
          "name": "Create Commission Transaction",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"agent_id\": {{agent_id}},\n  \"sale_id\": 1,\n  \"amount\": 15000.00,\n  \"transaction_type\": \"earned\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/commission-transactions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "commission-transactions"]
            }
          }
        }
      ]
    },
    {
      "name": "7. Performance",
      "description": "Agent performance metrics and rankings.",
      "item": [
        {
          "name": "Get Agent Performance",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/agents/{{agent_id}}/performance",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "{{agent_id}}", "performance"],
              "query": [
                {"key": "date_from", "value": "2026-01-01", "disabled": true},
                {"key": "date_to", "value": "2026-12-31", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Get Agents Ranking",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/agents/ranking?metric=sales_count&period=month&limit=10",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "agents", "ranking"],
              "query": [
                {"key": "metric", "value": "sales_count", "description": "sales_count, sales_value, commission_earned"},
                {"key": "period", "value": "month", "description": "month, quarter, year"},
                {"key": "limit", "value": "10"}
              ]
            }
          }
        }
      ]
    },
    {
      "name": "8. Leads - CRUD",
      "description": "Lead management operations.",
      "item": [
        {
          "name": "List Leads",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "offset", "value": "0"},
                {"key": "state", "value": "qualified", "disabled": true},
                {"key": "agent_id", "value": "", "disabled": true},
                {"key": "search", "value": "", "disabled": true},
                {"key": "budget_min", "value": "", "disabled": true},
                {"key": "budget_max", "value": "", "disabled": true},
                {"key": "bedrooms", "value": "", "disabled": true},
                {"key": "location", "value": "", "disabled": true},
                {"key": "sort_by", "value": "create_date", "disabled": true},
                {"key": "sort_order", "value": "desc", "disabled": true}
              ]
            },
            "description": "**RBAC**: Agents see own leads, Managers see all company leads."
          }
        },
        {
          "name": "Create Lead",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.id) {",
                  "    pm.environment.set('lead_id', jsonData.id);",
                  "    console.log('✅ Lead ID saved: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"João Silva - Apartamento Centro\",\n  \"phone\": \"+55 11 98765-4321\",\n  \"email\": \"joao.silva@example.com\",\n  \"budget_min\": 200000.00,\n  \"budget_max\": 350000.00,\n  \"bedrooms_needed\": 2,\n  \"location_preference\": \"Centro, Jardins\",\n  \"first_contact_date\": \"2026-02-03\",\n  \"expected_closing_date\": \"2026-03-15\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leads",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads"]
            }
          }
        },
        {
          "name": "Get Lead Details",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}"]
            }
          }
        },
        {
          "name": "Update Lead",
          "request": {
            "method": "PUT",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"state\": \"contacted\",\n  \"budget_max\": 400000.00\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}"]
            }
          }
        },
        {
          "name": "Archive Lead",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "9. Lead Actions",
      "description": "Lead workflow actions.",
      "item": [
        {
          "name": "Convert Lead to Sale",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_id\": {{property_id}}\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}/convert",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}", "convert"]
            },
            "description": "**Requirements**: Lead must be 'qualified' state."
          }
        },
        {
          "name": "Reopen Lost Lead",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Client re-engaged after budget increase\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}/reopen",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}", "reopen"]
            },
            "description": "**Requirements**: Lead must be 'lost' state."
          }
        }
      ]
    },
    {
      "name": "10. Lead Analytics",
      "description": "Lead statistics and export.",
      "item": [
        {
          "name": "Get Lead Statistics",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads/statistics",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "statistics"],
              "query": [
                {"key": "agent_id", "value": "", "disabled": true},
                {"key": "date_from", "value": "2026-01-01", "disabled": true},
                {"key": "date_to", "value": "2026-12-31", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Export Leads to CSV",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads/export?state=qualified",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "export"],
              "query": [
                {"key": "state", "value": "qualified"}
              ]
            }
          }
        }
      ]
    },
    {
      "name": "11. Lead Activities",
      "description": "Activity tracking on leads.",
      "item": [
        {
          "name": "List Lead Activities",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}/activities?limit=50&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}", "activities"],
              "query": [
                {"key": "limit", "value": "50"},
                {"key": "offset", "value": "0"}
              ]
            }
          }
        },
        {
          "name": "Log Activity on Lead",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"body\": \"Called client - interested in 3-bedroom condos downtown. Budget confirmed at R$400k.\",\n  \"activity_type\": \"call\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}/activities",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}", "activities"]
            }
          }
        },
        {
          "name": "Schedule Activity on Lead",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"summary\": \"Follow-up call regarding budget increase\",\n  \"activity_type_id\": 1,\n  \"date_deadline\": \"2026-02-10\",\n  \"note\": \"Client requested callback after 2pm\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leads/{{lead_id}}/schedule-activity",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "{{lead_id}}", "schedule-activity"]
            }
          }
        }
      ]
    },
    {
      "name": "12. Lead Filters",
      "description": "Saved search filters.",
      "item": [
        {
          "name": "List Saved Filters",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads/filters",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "filters"]
            }
          }
        },
        {
          "name": "Create Saved Filter",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData && jsonData.id) {",
                  "    pm.environment.set('filter_id', jsonData.id);",
                  "    console.log('✅ Filter ID saved: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"High-value Centro leads\",\n  \"filter_domain\": {\n    \"budget_min\": 300000,\n    \"budget_max\": 500000,\n    \"bedrooms\": 3,\n    \"location\": \"Centro\",\n    \"state\": \"qualified\"\n  },\n  \"is_shared\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leads/filters",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "filters"]
            }
          }
        },
        {
          "name": "Delete Saved Filter",
          "request": {
            "method": "DELETE",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/leads/filters/{{filter_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leads", "filters", "{{filter_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "13. Master Data",
      "description": "Reference data endpoints (some public).",
      "item": [
        {
          "name": "List Property Types",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/property-types",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "property-types"]
            },
            "description": "Public endpoint - no authentication required."
          }
        },
        {
          "name": "List Location Types",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location-types",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location-types"]
            },
            "description": "Public endpoint - no authentication required."
          }
        },
        {
          "name": "List States/Regions",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/states",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "states"]
            },
            "description": "Public endpoint - no authentication required."
          }
        },
        {
          "name": "List Tags",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tags",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "tags"]
            },
            "description": "Public endpoint - no authentication required."
          }
        },
        {
          "name": "List Amenities",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/amenities",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "amenities"]
            },
            "description": "Public endpoint - no authentication required."
          }
        },
        {
          "name": "List Owners",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/owners",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "owners"]
            }
          }
        },
        {
          "name": "List Companies",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{access_token}}"},
              {"key": "User-Agent", "value": "{{user_agent}}"},
              {"key": "X-Openerp-Session-Id", "value": "{{session_id}}"}
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/companies",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "companies"]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {"key": "base_url", "value": "http://localhost:8069", "type": "string"},
    {"key": "client_id", "value": "app", "type": "string"},
    {"key": "client_secret", "value": "secret", "type": "string"},
    {"key": "access_token", "value": "", "type": "string"},
    {"key": "refresh_token", "value": "", "type": "string"},
    {"key": "session_id", "value": "", "type": "string"},
    {"key": "user_agent", "value": "PostmanRuntime/7.26.8", "type": "string"},
    {"key": "user_email", "value": "admin@example.com", "type": "string"},
    {"key": "user_password", "value": "admin", "type": "string"},
    {"key": "property_id", "value": "1", "type": "string"},
    {"key": "agent_id", "value": "1", "type": "string"},
    {"key": "assignment_id", "value": "", "type": "string"},
    {"key": "rule_id", "value": "", "type": "string"},
    {"key": "lead_id", "value": "", "type": "string"},
    {"key": "filter_id", "value": "", "type": "string"}
  ]
}
