{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "Agent Management API - Odoo 18",
		"description": "Collection completa da API de Gerenciamento de Agentes com autentica√ß√£o JWT, multi-tenancy e valida√ß√£o CRECI.\n\n**Configura√ß√£o Inicial:**\n1. Configure as vari√°veis de ambiente (base_url j√° est√° configurada)\n2. Execute o request de Login primeiro para obter o token\n3. Os demais requests usar√£o o token automaticamente\n\n**Features:**\n- CRUD de Agentes com valida√ß√£o CRECI e CPF\n- Atribui√ß√£o de agentes a im√≥veis\n- Regras de comiss√£o (percentual e valor fixo)\n- C√°lculo autom√°tico de comiss√µes\n- M√©tricas de performance e rankings\n- Isolamento multi-tenant\n\n**ADRs Implementadas:**\n- ADR-005: OpenAPI 3.0\n- ADR-007: HATEOAS\n- ADR-008: Multi-tenancy\n- ADR-011: Security (@require_jwt + @require_session)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "0. Authentication",
			"item": [
				{
					"name": "Login - Get Access Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Salva o access_token na vari√°vel de ambiente",
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.access_token) {",
									"        pm.environment.set(\"access_token\", jsonData.access_token);",
									"        console.log(\"‚úÖ Token salvo:\", jsonData.access_token.substring(0, 20) + \"...\");",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"admin\",\n    \"password\": \"admin\",\n    \"db\": \"realestate\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"login"
							]
						},
						"description": "Faz login e obt√©m o access_token JWT para usar nos demais requests.\n\n**Credenciais padr√£o:**\n- Username: admin\n- Password: admin\n- Database: realestate\n\n**O token √© salvo automaticamente** na vari√°vel de ambiente `access_token`."
					},
					"response": []
				}
			],
			"description": "Endpoints de autentica√ß√£o para obter tokens JWT"
		},
		{
			"name": "1. Agents - CRUD",
			"item": [
				{
					"name": "List Agents",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/agents?active=true&limit=20&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents"
							],
							"query": [
								{
									"key": "active",
									"value": "true",
									"description": "Filtrar por status (true, false, all)"
								},
								{
									"key": "limit",
									"value": "20",
									"description": "N√∫mero de registros (max: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Pagina√ß√£o"
								},
								{
									"key": "creci_state",
									"value": "SP",
									"description": "Filtrar por UF do CRECI",
									"disabled": true
								},
								{
									"key": "creci_number",
									"value": "123456",
									"description": "Buscar por n√∫mero CRECI",
									"disabled": true
								}
							]
						},
						"description": "Lista todos os agentes com pagina√ß√£o e filtros.\n\n**Filtros dispon√≠veis:**\n- active: true/false/all\n- creci_state: UF (SP, RJ, MG, etc)\n- creci_number: n√∫mero do CRECI\n- limit: 1-100 (padr√£o: 20)\n- offset: para pagina√ß√£o\n\n**Multi-tenancy:** Retorna apenas agentes da company do usu√°rio."
					},
					"response": []
				},
				{
					"name": "Create Agent",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Salva o ID do agente criado",
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.id) {",
									"        pm.environment.set(\"agent_id\", jsonData.data.id);",
									"        console.log(\"‚úÖ Agent ID salvo:\", jsonData.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Jo√£o Silva\",\n    \"cpf\": \"123.456.789-09\",\n    \"email\": \"joao.silva@realestate.com\",\n    \"phone\": \"(11) 98765-4321\",\n    \"creci\": \"CRECI/SP 123456\",\n    \"hire_date\": \"2024-01-15\",\n    \"active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/agents",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents"
							]
						},
						"description": "Cria um novo agente imobili√°rio.\n\n**Valida√ß√µes autom√°ticas:**\n- ‚úÖ CPF v√°lido (d√≠gitos verificadores)\n- ‚úÖ CRECI normalizado (CRECI/UF NNNNNN)\n- ‚úÖ Email formato v√°lido\n- ‚úÖ Phone formato brasileiro\n- ‚úÖ Company auto-atribu√≠da (multi-tenancy)\n\n**Campos obrigat√≥rios:**\n- name, cpf, email, creci\n\n**O agent_id √© salvo automaticamente** na vari√°vel de ambiente."
					},
					"response": []
				},
				{
					"name": "Get Agent by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}"
							]
						},
						"description": "Retorna os detalhes completos de um agente espec√≠fico.\n\n**Inclui:**\n- Dados pessoais\n- CRECI normalizado\n- Im√≥veis atribu√≠dos (count)\n- Regras de comiss√£o (count)\n- M√©tricas de performance"
					},
					"response": []
				},
				{
					"name": "Update Agent",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Jo√£o Silva Santos\",\n    \"email\": \"joao.santos@realestate.com\",\n    \"phone\": \"(11) 91234-5678\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}"
							]
						},
						"description": "Atualiza os dados de um agente.\n\n**Campos edit√°veis:**\n- name, email, phone\n- creci (com valida√ß√£o)\n\n**Campos protegidos:**\n- ‚ùå company_id (multi-tenancy)\n- ‚ùå cpf (imut√°vel ap√≥s cria√ß√£o)"
					},
					"response": []
				},
				{
					"name": "Deactivate Agent",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"reason\": \"Desligamento por decis√£o da empresa\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}/deactivate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}",
								"deactivate"
							]
						},
						"description": "Desativa um agente (soft delete).\n\n**Comportamento:**\n- Define active=False\n- Registra deactivation_date e reason\n- Preserva hist√≥rico de transa√ß√µes\n- Agente n√£o aparece em listagens ativas\n- Pode ser reativado posteriormente"
					},
					"response": []
				},
				{
					"name": "Reactivate Agent",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}/reactivate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}",
								"reactivate"
							]
						},
						"description": "Reativa um agente previamente desativado.\n\n**Comportamento:**\n- Define active=True\n- Limpa deactivation_date e reason\n- Agente volta a aparecer em listagens ativas"
					},
					"response": []
				}
			],
			"description": "Opera√ß√µes CRUD (Create, Read, Update, Deactivate) de agentes"
		},
		{
			"name": "2. Assignments",
			"item": [
				{
					"name": "Create Assignment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.id) {",
									"        pm.environment.set(\"assignment_id\", jsonData.data.id);",
									"        console.log(\"‚úÖ Assignment ID salvo:\", jsonData.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"agent_id\": {{agent_id}},\n    \"property_id\": 1,\n    \"responsibility_type\": \"seller\",\n    \"assignment_date\": \"2024-01-15\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/assignments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"assignments"
							]
						},
						"description": "Atribui um agente a um im√≥vel.\n\n**Valida√ß√µes:**\n- ‚úÖ Agente e im√≥vel devem ser da mesma company\n- ‚úÖ responsibility_type: 'seller', 'buyer', 'both'\n- ‚úÖ Permite m√∫ltiplos agentes por im√≥vel\n\n**Nota:** Mude property_id para um ID v√°lido do seu sistema."
					},
					"response": []
				},
				{
					"name": "List Agent Properties",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}/properties",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}",
								"properties"
							]
						},
						"description": "Lista todos os im√≥veis atribu√≠dos a um agente espec√≠fico.\n\n**Retorna:**\n- Lista de im√≥veis\n- Tipo de responsabilidade (seller/buyer)\n- Data de atribui√ß√£o"
					},
					"response": []
				},
				{
					"name": "Delete Assignment",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/assignments/{{assignment_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"assignments",
								"{{assignment_id}}"
							]
						},
						"description": "Remove a atribui√ß√£o de um agente a um im√≥vel.\n\n**Valida√ß√£o:**\n- Apenas assignments da mesma company podem ser deletadas"
					},
					"response": []
				}
			],
			"description": "Gerenciamento de atribui√ß√µes agente-im√≥vel"
		},
		{
			"name": "3. Commission Rules",
			"item": [
				{
					"name": "Create Commission Rule - Percentage",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.id) {",
									"        pm.environment.set(\"commission_rule_id\", jsonData.data.id);",
									"        console.log(\"‚úÖ Commission Rule ID salvo:\", jsonData.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"agent_id\": {{agent_id}},\n    \"transaction_type\": \"sale\",\n    \"structure_type\": \"percentage\",\n    \"percentage\": 6.0,\n    \"min_value\": 500000.00,\n    \"max_value\": 2000000.00,\n    \"valid_from\": \"2024-01-01\",\n    \"valid_until\": \"2024-12-31\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}/commission-rules",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}",
								"commission-rules"
							]
						},
						"description": "Cria uma regra de comiss√£o percentual.\n\n**Exemplo:** 6% em vendas entre R$ 500k e R$ 2M\n\n**Valida√ß√µes:**\n- ‚úÖ percentage: 0-100\n- ‚úÖ min_value <= max_value\n- ‚úÖ valid_from <= valid_until\n- ‚úÖ transaction_type: sale ou rental"
					},
					"response": []
				},
				{
					"name": "Create Commission Rule - Fixed Amount",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"agent_id\": {{agent_id}},\n    \"transaction_type\": \"rental\",\n    \"structure_type\": \"fixed\",\n    \"fixed_amount\": 5000.00,\n    \"valid_from\": \"2024-01-01\",\n    \"valid_until\": \"2024-12-31\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}/commission-rules",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}",
								"commission-rules"
							]
						},
						"description": "Cria regra com valor fixo de comiss√£o.\n\n**Exemplo:** R$ 5.000 fixos por aluguel fechado\n\n**Uso:** Ideal para produtos de entrada ou bonifica√ß√µes fixas."
					},
					"response": []
				},
				{
					"name": "List Agent Commission Rules",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}/commission-rules?active_only=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}",
								"commission-rules"
							],
							"query": [
								{
									"key": "active_only",
									"value": "true",
									"description": "Filtrar apenas regras ativas (dentro do per√≠odo de validade)"
								}
							]
						},
						"description": "Lista todas as regras de comiss√£o de um agente.\n\n**Filtros:**\n- active_only=true: Apenas regras v√°lidas hoje\n- active_only=false: Todas (inclusive expiradas)"
					},
					"response": []
				},
				{
					"name": "Update Commission Rule",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"percentage\": 7.0,\n    \"valid_until\": \"2025-12-31\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/commission-rules/{{commission_rule_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"commission-rules",
								"{{commission_rule_id}}"
							]
						},
						"description": "Atualiza uma regra de comiss√£o existente.\n\n**‚ö†Ô∏è Importante:** Altera√ß√µes n√£o s√£o retroativas!\n- Transa√ß√µes j√° calculadas mant√™m o snapshot da regra original\n- Apenas transa√ß√µes futuras usar√£o a nova regra"
					},
					"response": []
				}
			],
			"description": "Gerenciamento de regras de comiss√£o (percentual e valor fixo)"
		},
		{
			"name": "4. Commission Transactions",
			"item": [
				{
					"name": "Create Commission Transaction",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"agent_id\": {{agent_id}},\n    \"transaction_type\": \"sale\",\n    \"transaction_amount\": 850000.00,\n    \"transaction_reference\": \"VENDA-2024-001\",\n    \"transaction_date\": \"2024-01-15\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/commission-transactions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"commission-transactions"
							]
						},
						"description": "Registra uma transa√ß√£o e calcula a comiss√£o automaticamente.\n\n**C√°lculo autom√°tico:**\n1. Busca regra ativa do agente para o tipo de transa√ß√£o\n2. Aplica percentual ou valor fixo\n3. Salva snapshot imut√°vel da regra\n4. Retorna comiss√£o calculada\n\n**Exemplo de retorno:**\n```json\n{\n  \"commission_amount\": 51000.00,\n  \"rule_snapshot\": {...}\n}\n```\n\n**Imutabilidade:**\n- Altera√ß√µes futuras na regra n√£o afetam transa√ß√µes passadas"
					},
					"response": []
				},
				{
					"name": "Calculate Commission Preview",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"agent_id\": {{agent_id}},\n    \"transaction_type\": \"sale\",\n    \"transaction_amount\": 1500000.00,\n    \"preview_only\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/commission-transactions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"commission-transactions"
							]
						},
						"description": "Calcula comiss√£o sem criar transa√ß√£o (preview).\n\n**√ötil para:**\n- üí∞ Mostrar ao agente quanto vai ganhar\n- üìä Simula√ß√µes de diferentes valores\n- ‚úÖ Valida√ß√£o antes de fechar neg√≥cio\n\n**N√£o persiste no banco** - apenas c√°lculo!"
					},
					"response": []
				}
			],
			"description": "C√°lculo e registro de comiss√µes com snapshot imut√°vel de regras"
		},
		{
			"name": "5. Performance",
			"item": [
				{
					"name": "Get Agent Performance",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/agents/{{agent_id}}/performance?start_date=2024-01-01&end_date=2024-12-31",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"{{agent_id}}",
								"performance"
							],
							"query": [
								{
									"key": "start_date",
									"value": "2024-01-01",
									"description": "Data inicial (formato: YYYY-MM-DD)"
								},
								{
									"key": "end_date",
									"value": "2024-12-31",
									"description": "Data final"
								},
								{
									"key": "metric",
									"value": "all",
									"description": "M√©trica espec√≠fica (all, sales, commissions, properties)",
									"disabled": true
								}
							]
						},
						"description": "Retorna m√©tricas de performance de um agente.\n\n**M√©tricas inclu√≠das:**\n- üí∞ total_commissions: Comiss√µes ganhas\n- üìà total_sales_count: Vendas fechadas\n- üè† active_properties_count: Im√≥veis ativos\n- üíµ avg_sale_value: Ticket m√©dio\n- üìä conversion_rate: Taxa de convers√£o\n\n**Filtros de per√≠odo:**\n- start_date / end_date (opcional)\n- Padr√£o: √∫ltimos 30 dias\n\n**Cache:** Resultados cacheados no Redis por 5 minutos"
					},
					"response": []
				},
				{
					"name": "Get Agents Ranking",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/agents/ranking?metric=total_commissions&period=month&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"agents",
								"ranking"
							],
							"query": [
								{
									"key": "metric",
									"value": "total_commissions",
									"description": "M√©trica para ranking (total_commissions, total_sales, avg_ticket)"
								},
								{
									"key": "period",
									"value": "month",
									"description": "Per√≠odo (week, month, quarter, year)"
								},
								{
									"key": "limit",
									"value": "10",
									"description": "Top N agentes"
								}
							]
						},
						"description": "Retorna ranking dos melhores agentes.\n\n**Crit√©rios de ranking:**\n- üí∞ total_commissions: Maior faturamento\n- üìà total_sales: Maior volume de vendas\n- üíµ avg_ticket: Maior ticket m√©dio\n\n**Per√≠odos:**\n- week, month, quarter, year\n\n**Multi-tenancy:**\n- Ranking apenas da company do usu√°rio\n\n**Cache:**\n- Resultados cacheados no Redis (5 min)"
					},
					"response": []
				}
			],
			"description": "M√©tricas de performance individuais e rankings comparativos"
		},
		{
			"name": "6. OAuth Tokens",
			"item": [
				{
					"name": "Get OAuth Token (Client Credentials)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"grant_type\": \"client_credentials\",\n    \"client_id\": \"your_client_id\",\n    \"client_secret\": \"your_client_secret\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/token",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"token"
							]
						},
						"description": "Obt√©m access token usando OAuth 2.0 Client Credentials flow"
					},
					"response": []
				},
				{
					"name": "Refresh OAuth Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh_token\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"refresh"
							]
						},
						"description": "Renova um access token expirado usando o refresh token"
					},
					"response": []
				},
				{
					"name": "Revoke OAuth Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"{{access_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/revoke",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"revoke"
							]
						},
						"description": "Revoga um access token ativo"
					},
					"response": []
				}
			],
			"description": "Gest√£o de tokens OAuth 2.0"
		},
		{
			"name": "7. Users",
			"item": [
				{
					"name": "User Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"login\": \"admin\",\n    \"password\": \"admin\",\n    \"db\": \"realestate\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"login"
							]
						},
						"description": "Autentica√ß√£o de usu√°rio"
					},
					"response": []
				},
				{
					"name": "User Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/users/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"logout"
							]
						},
						"description": "Logout e invalida√ß√£o de sess√£o"
					},
					"response": []
				},
				{
					"name": "Update Profile",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Jo√£o Silva Santos\",\n    \"email\": \"joao@example.com\",\n    \"phone\": \"+55 11 98765-4321\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/profile",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"profile"
							]
						},
						"description": "Atualiza perfil do usu√°rio logado"
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"old_password\": \"admin\",\n    \"new_password\": \"newpassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/change-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"users",
								"change-password"
							]
						},
						"description": "Altera senha do usu√°rio logado"
					},
					"response": []
				}
			],
			"description": "Gest√£o de usu√°rios e perfis"
		},
		{
			"name": "8. Properties",
			"item": [
				{
					"name": "List Properties",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/properties?limit=20&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"properties"
							],
							"query": [
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "offset",
									"value": "0"
								},
								{
									"key": "active",
									"value": "true",
									"disabled": true
								}
							]
						},
						"description": "Lista im√≥veis com pagina√ß√£o"
					},
					"response": []
				},
				{
					"name": "Create Property",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.id) {",
									"        pm.environment.set(\"property_id\", jsonData.data.id);",
									"        console.log(\"‚úÖ Property ID salvo:\", jsonData.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"property_type_id\": 1,\n    \"title\": \"Apartamento 3 quartos\",\n    \"description\": \"Apartamento amplo com vista para o mar\",\n    \"price\": 850000.00,\n    \"area\": 120.5,\n    \"bedrooms\": 3,\n    \"bathrooms\": 2\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/properties",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"properties"
							]
						},
						"description": "Cria novo im√≥vel"
					},
					"response": []
				},
				{
					"name": "Get Property by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/properties/{{property_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"properties",
								"{{property_id}}"
							]
						},
						"description": "Busca im√≥vel por ID"
					},
					"response": []
				},
				{
					"name": "Update Property",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Apartamento 3 quartos - Atualizado\",\n    \"price\": 900000.00\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/properties/{{property_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"properties",
								"{{property_id}}"
							]
						},
						"description": "Atualiza im√≥vel existente"
					},
					"response": []
				},
				{
					"name": "Delete Property",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/properties/{{property_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"properties",
								"{{property_id}}"
							]
						},
						"description": "Remove im√≥vel (soft delete)"
					},
					"response": []
				}
			],
			"description": "Gest√£o de im√≥veis (CRUD)"
		},
		{
			"name": "9. Master Data",
			"item": [
				{
					"name": "Get Property Types",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/property-types",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"property-types"
							]
						},
						"description": "Lista tipos de im√≥veis"
					},
					"response": []
				},
				{
					"name": "Get Location Types",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/location-types",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"location-types"
							]
						},
						"description": "Lista tipos de localiza√ß√£o"
					},
					"response": []
				},
				{
					"name": "Get States",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/states",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"states"
							]
						},
						"description": "Lista estados brasileiros"
					},
					"response": []
				},
				{
					"name": "Get Tags",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/tags",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"tags"
							]
						},
						"description": "Lista tags de im√≥veis"
					},
					"response": []
				},
				{
					"name": "Get Amenities",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/amenities",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"amenities"
							]
						},
						"description": "Lista amenidades (comodidades)"
					},
					"response": []
				},
				{
					"name": "Get Owners",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/owners",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"owners"
							]
						},
						"description": "Lista propriet√°rios de im√≥veis"
					},
					"response": []
				},
				{
					"name": "Get Companies",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/companies",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"companies"
							]
						},
						"description": "Lista imobili√°rias (empresas do sistema)"
					},
					"response": []
				}
			],
			"description": "Dados auxiliares (tipos, estados, tags, etc)"
		},
		{
			"name": "10. User Context",
			"item": [
				{
					"name": "Get Current User Context (/me)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"me"
							]
						},
						"description": "Retorna informa√ß√µes completas sobre o usu√°rio autenticado (perfil, sess√£o, empresas acess√≠veis)"
					},
					"response": []
				}
			],
			"description": "Informa√ß√µes de contexto do usu√°rio autenticado"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8069",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "agent_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "property_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "assignment_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "commission_rule_id",
			"value": "",
			"type": "string"
		}
	]
}
